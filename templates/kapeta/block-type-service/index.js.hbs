//#FILENAME:index.js:write-always
//
// GENERATED SOURCE - DO NOT EDIT
//
const Path = require('path');
const Server = require('@kapeta/sdk-server');

{{#providers-of-type 'kapeta/resource-type-rest-api'}}
const {{type metadata.name}}Route = require('./src/rest/{{type metadata.name}}Route');
const {{type metadata.name}}RouteService = require('./src/service/{{type metadata.name}}RouteService');
{{/providers-of-type}}

{{#providers-of-type 'kapeta/resource-type-grpc-api'}}
    const {{type metadata.name}}Route = require('./src/grpc/{{type metadata.name}}Route');
    const {{type metadata.name}}RouteService = require('./src/service/{{type metadata.name}}RouteService');
{{/providers-of-type}}

const server = new Server('{{data.metadata.name}}', __dirname);

{{#providers-of-type 'kapeta/resource-type-rest-api'}}
server.addRoute(
    new {{type metadata.name}}Route(
        new {{type metadata.name}}RouteService()
    )
);
{{/providers-of-type}}

{{#providers-of-type 'kapeta/resource-type-grpc-api'}}
server.addRoute(
    new {{type metadata.name}}Route(
        new {{type metadata.name}}RouteService()
    )
);
{{/providers-of-type}}

server.start();